<!-- pages/activity-list/activity-list.wxml -->
<view class="container">
  <!-- å¤´éƒ¨æ ‡é¢˜ -->
  <view class="header">
    <text class="title">æ´»åŠ¨</text>
  </view>
  
  <!-- æ´»åŠ¨åˆ†ç±» -->
  <scroll-view class="category-scroll" scroll-x="true" wx:if="{{categories.length > 0}}">
    <view class="category-list">
      <view 
        class="category-item {{selectedCategory === '' ? 'active' : ''}}" 
        data-category="" 
        bindtap="selectCategory"
      >
        <text>å…¨éƒ¨</text>
      </view>
      <view 
        class="category-item {{selectedCategory === item ? 'active' : ''}}" 
        wx:for="{{categories}}" 
        wx:key="index" 
        data-category="{{item}}" 
        bindtap="selectCategory"
      >
        <text>{{item}}</text>
      </view>
    </view>
  </scroll-view>
  
  <!-- åŠ è½½ä¸­ -->
  <view class="loading" wx:if="{{isLoading && activities.length === 0}}">
    <text>åŠ è½½ä¸­...</text>
  </view>
  
  <!-- æ´»åŠ¨åˆ—è¡¨ -->
  <view class="activity-list" wx:if="{{activities.length > 0}}">
    <view 
      class="activity-item" 
      wx:for="{{activities}}" 
      wx:key="_id"
      data-activity-id="{{item._id}}"
      bindtap="enterActivityDetail"
    >
      <!-- æ´»åŠ¨å›¾ç‰‡ -->
      <image 
        class="activity-image" 
        src="{{item.images && item.images.length > 0 ? item.images[0] : 'https://picsum.photos/400/200'}}" 
        mode="aspectFill"
      ></image>
      
      <!-- æ´»åŠ¨ä¿¡æ¯ -->
      <view class="activity-info">
        <!-- æ´»åŠ¨æ ‡é¢˜ -->
        <text class="activity-title">{{item.title}}</text>
        
        <!-- æ´»åŠ¨æ—¶é—´å’Œåœ°ç‚¹ -->
        <view class="activity-meta">
          <view class="meta-item">
            <text class="meta-icon">ğŸ•</text>
            <text class="meta-text">{{formatTime(item.time)}}</text>
          </view>
          <view class="meta-item">
            <text class="meta-icon">ğŸ“</text>
            <text class="meta-text">{{item.location}}</text>
          </view>
        </view>
        
        <!-- æ´»åŠ¨äººæ•° -->
        <view class="activity-count">
          <text class="count-text">{{item.participants.length}}äººå·²æŠ¥å</text>
          <text class="category-text">{{item.category}}</text>
        </view>
      </view>
    </view>
  </view>
  
  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!isLoading && activities.length === 0}}">
    <image src="https://picsum.photos/200/200" class="empty-icon"></image>
    <text class="empty-text">æš‚æ— æ´»åŠ¨</text>
    <text class="empty-tips">åˆ›å»ºä¸€ä¸ªæ´»åŠ¨ï¼Œè®¤è¯†æ–°æœ‹å‹å§</text>
  </view>
  
  <!-- åˆ›å»ºæ´»åŠ¨æŒ‰é’® -->
  <view class="create-btn-container">
    <button 
      class="create-btn" 
      type="primary" 
      size="mini"
      bindtap="createActivity"
    >
      åˆ›å»ºæ´»åŠ¨
    </button>
  </view>
</view>